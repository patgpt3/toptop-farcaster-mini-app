import{jsxs as o,Fragment as n,jsx as r}from"react/jsx-runtime";import{ChevronDownIcon as e}from"@heroicons/react/24/outline";import{styled as i}from"styled-components";import{PrimaryButton as t}from"../../components/Button.mjs";import{BlobbyFooter as s}from"../../components/ModalFooter.mjs";import{ModalHeader as c}from"../../components/ModalHeader.mjs";import{Rows as a,Row as m}from"../../components/ui/layout/Row.mjs";import{ErrorMessage as l}from"../../components/ui/typography/ErrorMessage.mjs";import{LabelSm as d,LabelSmPrimary as p}from"../../components/ui/typography/LabelSm.mjs";import{Subtitle as h}from"../../components/ui/typography/Subtitle.mjs";import{Title as u}from"../../components/ui/typography/Title.mjs";import{Value as g}from"../../components/ui/typography/Value.mjs";import{Address as j}from"../../components/ui/wallet/Address.mjs";import{WalletInfoCard as f}from"../../components/ui/wallet/WalletInfoCard.mjs";import{Grow as y}from"../LandingScreen/styles.mjs";import{TransactionDetail as b}from"./TransactionDetail.mjs";import{useTransactionDetails as k}from"./useTransactionDetails.mjs";import"../../components/Loader.mjs";import"../../svg/protected-by-privy.mjs";import"@heroicons/react/24/outline/ArrowLeftIcon";import"@heroicons/react/24/outline/ArrowRightIcon";import"@heroicons/react/24/outline/QuestionMarkCircleIcon";import"@heroicons/react/24/outline/XMarkIcon";import"../../configuration/context.mjs";import"react";import"../../config.mjs";import"../../configuration/defaultClientConfig.mjs";import"../../constants.mjs";import"../../configuration/login-methods.mjs";import"../../configuration/wallets.mjs";import"../../connectors/chains/index.mjs";import"../../connectors/chains/arbitrum.mjs";import"../../connectors/chains/arbitrumSepolia.mjs";import"../../connectors/chains/avalanche.mjs";import"../../connectors/chains/avalancheFuji.mjs";import"../../connectors/chains/base.mjs";import"../../connectors/chains/baseSepolia.mjs";import"../../connectors/chains/berachainArtio.mjs";import"../../connectors/chains/celo.mjs";import"../../connectors/chains/celoAlfajores.mjs";import"../../connectors/chains/filecoin.mjs";import"../../connectors/chains/filecoinCalibration.mjs";import"../../connectors/chains/garnetHolesky.mjs";import"../../connectors/chains/holesky.mjs";import"../../connectors/chains/linea.mjs";import"../../connectors/chains/lineaTestnet.mjs";import"../../connectors/chains/lukso.mjs";import"../../connectors/chains/mainnet.mjs";import"../../connectors/chains/optimism.mjs";import"../../connectors/chains/optimismSepolia.mjs";import"../../connectors/chains/polygon.mjs";import"../../connectors/chains/polygonAmoy.mjs";import"../../connectors/chains/redstone.mjs";import"../../connectors/chains/sepolia.mjs";import"../../connectors/chains/zora.mjs";import"../../connectors/chains/zoraSepolia.mjs";import"../../connectors/chains/zoraTestnet.mjs";import"../../connectors/chains/utils.mjs";import"../../lib/solana/index.mjs";import"../../theme.mjs";import"tinycolor2";import"../../lib/cybr53.mjs";import"../../hooks/internal-context.mjs";import"../../hooks/index.mjs";import"../../components/ui/animation/LoadingSkeleton.mjs";import"@heroicons/react/24/outline/CheckIcon";import"@heroicons/react/24/outline/Square2StackIcon";import"../../utils/index.mjs";import"@ethersproject/providers";import"../../connectors/get-legacy-injected-providers.mjs";import"../../connectors/is-wallet-installed.mjs";import"../../errors.mjs";import"ofetch";import"../../components/ui/chips/Chip.mjs";import"../../components/ui/layout/Column.mjs";import"../../components/ui/typography/LabelXs.mjs";import"../../components/ui/wallet/shared.mjs";import"@ethersproject/address";const x=({transactionIndex:o,maxIndex:n})=>"number"!=typeof o||0===n?"":` (${o+1} / ${n+1})`,I=({img:i,submitError:f,prepareError:I,onClose:C,action:L,title:v,subtitle:A,total:E,txValue:M,to:$,tokenAddress:D,network:N,missingFunds:F,fee:P,from:z,cta:B,disabled:W,chain:Y,isSubmitting:q,isPreparing:H,isTokenPriceLoading:R,isTokenContractInfoLoading:V,isSponsored:X,symbol:Q,balance:U,onClick:G,transactionDetails:J,transactionIndex:K,maxIndex:O,onBack:Z,chainName:_})=>{let{showTransactionDetails:oo,setShowTransactionDetails:no,hasMoreDetails:ro,isErc20Ish:eo}=k(J);/*#__PURE__*/return o(n,{children:[/*#__PURE__*/r(c,{onClose:C,backFn:Z}),i&&/*#__PURE__*/r(S,{children:i}),/*#__PURE__*/o(u,{style:{marginTop:i?"1.5rem":0},children:[v,/*#__PURE__*/r(x,{maxIndex:O,transactionIndex:K})]}),/*#__PURE__*/r(h,{children:A}),/*#__PURE__*/o(a,{style:{marginTop:"2rem"},children:[eo&&/*#__PURE__*/o(n,{children:["approve"===L&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Action"}),/*#__PURE__*/r(g,{children:J?.action})]}),/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Amount"}),/*#__PURE__*/o(g,{$isLoading:eo&&V,children:[J?.formattedAmount," ",Q]})]})]}),E&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Total"}),/*#__PURE__*/r(g,{$isLoading:H||R,children:E})]}),J&&"spender"in J&&J?.spender?/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Spender"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:J.spender,url:Y?.blockExplorers?.default?.url,showCopyIcon:!1})})]}):null,$&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"To"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:$,url:Y?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),D&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Token address"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:D,url:Y?.blockExplorers?.default?.url,showCopyIcon:!1})})]}),/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Network"}),/*#__PURE__*/r(g,{children:N})]}),/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Estimated fee"}),/*#__PURE__*/r(g,{$isLoading:H||R||void 0===X,children:X?"Sponsored":P})]}),ro&&/*#__PURE__*/o(n,{children:[/*#__PURE__*/r(m,{className:"cursor-pointer",onClick:()=>no(!oo),children:/*#__PURE__*/o(p,{className:"flex items-center gap-x-1",children:["Details"," ",/*#__PURE__*/r(e,{style:{width:"0.75rem",marginLeft:"0.25rem",transform:oo?"rotate(180deg)":void 0}})]})}),oo&&J&&/*#__PURE__*/r(b,{action:L,chain:Y,transactionDetails:J,isTokenContractInfoLoading:V,symbol:Q})]})]}),/*#__PURE__*/r(y,{}),f?/*#__PURE__*/r(l,{style:{marginTop:"2rem"},children:f.message}):I?/*#__PURE__*/r(l,{style:{marginTop:"2rem"},children:T}):null,/*#__PURE__*/r(w,{$useSmallMargins:!(!I&&!f),title:Number(M)>0?void 0:!1!==X?"Your wallet":void 0,address:z,balance:U,isLoading:H||R,errMsg:H||I||f||!F?void 0:`Add funds on ${Y?.name??_} to complete transaction.`}),/*#__PURE__*/r(t,{style:{marginTop:"1rem"},loading:q,disabled:W||H,onClick:G,children:B}),/*#__PURE__*/r(s,{})]})},C=({img:e,title:i,subtitle:p,cta:f,network:b,blockExplorerUrl:k,transactionIndex:I,maxIndex:C,isMissingFunds:L,submitError:v,parseError:A,total:E,amount:M,fee:$,balance:D,from:N,to:F,tokenAddress:P,programAddress:z,transactingWalletAddress:B,disabled:W,isSubmitting:Y,isPreparing:q,isTokenPriceLoading:H,onClick:R,onClose:V,onBack:X})=>{let Q=q||H;/*#__PURE__*/return o(n,{children:[/*#__PURE__*/r(c,{onClose:V,backFn:X}),e&&/*#__PURE__*/r(S,{children:e}),/*#__PURE__*/o(u,{style:{marginTop:e?"1.5rem":0},children:[i,/*#__PURE__*/r(x,{maxIndex:C,transactionIndex:I})]}),/*#__PURE__*/r(h,{children:p}),/*#__PURE__*/o(a,{style:{marginTop:"2rem"},children:[(E||Q)&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Total"}),/*#__PURE__*/r(g,{$isLoading:Q,children:E})]}),N&&N!==B&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"From"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:N,url:k,showCopyIcon:!1})})]}),F&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"To"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:F,url:k,showCopyIcon:!1})})]}),P&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Token address"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:P,url:k,showCopyIcon:!1})})]}),z&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Program address"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(j,{address:z,url:k,showCopyIcon:!1})})]}),b&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Network"}),/*#__PURE__*/r(g,{children:b})]}),(M||Q)&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Amount"}),/*#__PURE__*/r(g,{children:/*#__PURE__*/r(g,{$isLoading:Q,children:M})})]}),($||Q)&&/*#__PURE__*/o(m,{children:[/*#__PURE__*/r(d,{children:"Estimated fee"}),/*#__PURE__*/r(g,{$isLoading:Q,children:$})]})]}),/*#__PURE__*/r(y,{}),v?/*#__PURE__*/r(l,{style:{marginTop:"2rem"},children:v.message}):A?/*#__PURE__*/r(l,{style:{marginTop:"2rem"},children:T}):null,/*#__PURE__*/r(w,{$useSmallMargins:!(!A&&!v),title:"Your wallet",address:B,balance:D,isLoading:q||H,errMsg:q||A||v||!L?void 0:"Add funds on Solana to complete transaction."}),/*#__PURE__*/r(t,{style:{marginTop:"1rem"},loading:Y,disabled:W||q,onClick:R,children:f}),/*#__PURE__*/r(s,{})]})};let w=/*#__PURE__*/i(f).withConfig({displayName:"StyledWalletInfoCard",componentId:"sc-67aab208-0"})(["",""],(o=>o.$useSmallMargins?"margin-top: 0.5rem;":"margin-top: 2rem;")),T="There was an error preparing your transaction. Your transaction request will likely fail.",S=/*#__PURE__*/i.div.withConfig({displayName:"ImageContainer",componentId:"sc-67aab208-1"})(["display:flex;width:100%;justify-content:center;max-height:40px;> img{object-fit:contain;border-radius:var(--privy-border-radius-sm);}"]);export{C as SendSolanaTransactionScreenView,I as SendTransactionScreenView,x as TransactionIndex};
