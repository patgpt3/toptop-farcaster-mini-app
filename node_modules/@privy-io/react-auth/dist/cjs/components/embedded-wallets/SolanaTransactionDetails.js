"use strict";var e=require("react/jsx-runtime"),r=require("@heroicons/react/24/outline/ChevronDownIcon"),n=require("react"),i=require("styled-components"),s=require("../ModalHeader.js"),o=require("../ui/layout/Row.js"),t=require("../ui/typography/LabelSm.js"),c=require("../ui/typography/Value.js"),a=require("./PriceDisplay.js"),l=require("./WalletLink.js");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}require("@heroicons/react/24/outline/ArrowLeftIcon"),require("@heroicons/react/24/outline/ArrowRightIcon"),require("@heroicons/react/24/outline/QuestionMarkCircleIcon"),require("@heroicons/react/24/outline/XMarkIcon"),require("../../configuration/context.js"),require("../../config.js"),require("../../configuration/defaultClientConfig.js"),require("../../constants.js"),require("../../configuration/login-methods.js"),require("../../configuration/wallets.js"),require("../../connectors/chains/index.js"),require("../../connectors/chains/arbitrum.js"),require("../../connectors/chains/arbitrumSepolia.js"),require("../../connectors/chains/avalanche.js"),require("../../connectors/chains/avalancheFuji.js"),require("../../connectors/chains/base.js"),require("../../connectors/chains/baseSepolia.js"),require("../../connectors/chains/berachainArtio.js"),require("../../connectors/chains/celo.js"),require("../../connectors/chains/celoAlfajores.js"),require("../../connectors/chains/filecoin.js"),require("../../connectors/chains/filecoinCalibration.js"),require("../../connectors/chains/garnetHolesky.js"),require("../../connectors/chains/holesky.js"),require("../../connectors/chains/linea.js"),require("../../connectors/chains/lineaTestnet.js"),require("../../connectors/chains/lukso.js"),require("../../connectors/chains/mainnet.js"),require("../../connectors/chains/optimism.js"),require("../../connectors/chains/optimismSepolia.js"),require("../../connectors/chains/polygon.js"),require("../../connectors/chains/polygonAmoy.js"),require("../../connectors/chains/redstone.js"),require("../../connectors/chains/sepolia.js"),require("../../connectors/chains/zora.js"),require("../../connectors/chains/zoraSepolia.js"),require("../../connectors/chains/zoraTestnet.js"),require("../../connectors/chains/utils.js"),require("../../lib/solana/index.js"),require("../../theme.js"),require("tinycolor2"),require("../../lib/cybr53.js"),require("../../hooks/internal-context.js"),require("../../hooks/index.js"),require("../ui/animation/LoadingSkeleton.js"),require("@ethersproject/units"),require("../../lib/ethers.js"),require("@ethersproject/bignumber"),require("@privy-io/js-sdk-core"),require("../../utils/index.js"),require("@ethersproject/providers"),require("../../connectors/get-legacy-injected-providers.js"),require("../../connectors/is-wallet-installed.js"),require("../../errors.js"),require("ofetch"),require("../../lib/solana/transaction.js"),require("../../utils/buffer/readBigInt64LE.js");var d=/*#__PURE__*/u(r);function j({instruction:r,rpcEndpoint:n,solPrice:i,hideAmount:s}){return r?/*#__PURE__*/e.jsxs(o.Rows,{children:[!s&&!!r.amount&&/*#__PURE__*/e.jsxs(o.Row,{children:[/*#__PURE__*/e.jsx(t.LabelSm,{children:"Amount"}),/*#__PURE__*/e.jsx(c.Value,{children:/*#__PURE__*/e.jsx(a.SolanaPriceDisplay,{quantities:[r.amount],tokenPrice:i,tokenSymbol:r.token?.symbol??"SOL",tokenDecimals:r.token?.decimals??9})})]}),r.to&&/*#__PURE__*/e.jsxs(o.Row,{children:[/*#__PURE__*/e.jsx(t.LabelSm,{children:"To"}),/*#__PURE__*/e.jsx(c.Value,{children:/*#__PURE__*/e.jsx(l.WalletLink,{walletAddress:r.to,rpcEndpoint:n,network:"solana"})})]}),r.from&&/*#__PURE__*/e.jsxs(o.Row,{children:[/*#__PURE__*/e.jsx(t.LabelSm,{children:"From"}),/*#__PURE__*/e.jsx(c.Value,{children:/*#__PURE__*/e.jsx(l.WalletLink,{walletAddress:r.from,rpcEndpoint:n,network:"solana"})})]})]}):null}let h=/*#__PURE__*/i.styled.div.withConfig({displayName:"InstructionsBox",componentId:"sc-3551ef3c-0"})(["display:flex;flex-direction:column;width:100%;overflow:hidden;&&{border:1px solid;border-color:var(--privy-color-foreground-4);border-radius:var(--privy-border-radius-md);}"]),p=/*#__PURE__*/i.styled.header.withConfig({displayName:"InstructionsBoxHeader",componentId:"sc-3551ef3c-1"})(["display:flex;justify-content:space-between;align-items:center;padding:12px;background-color:var(--privy-color-background-2);"]),q=/*#__PURE__*/i.styled.h4.withConfig({displayName:"HeaderTitle",componentId:"sc-3551ef3c-2"})(["font-size:14px;font-weight:500;line-height:19.6px;"]),x=/*#__PURE__*/i.styled.div.withConfig({displayName:"InstructionsBoxContent",componentId:"sc-3551ef3c-3"})(["padding:12px;"]),m=/*#__PURE__*/i.styled.div.withConfig({displayName:"NavigationButtonsConatiner",componentId:"sc-3551ef3c-4"})(["display:flex;gap:8px;align-items:center;"]),f=/*#__PURE__*/i.styled(t.LabelSm).withConfig({displayName:"InteractiveLabel",componentId:"sc-3551ef3c-5"})(["cursor:pointer;display:inline-flex;gap:8px;align-items:center;"]);exports.SolanaTransactionDetails=({instructions:r,fees:i,transactionInfo:l,solPrice:u,rpcEndpoint:y})=>{let g=r.reduce(((e,{amount:r,token:n})=>r&&"SOL"===n?.symbol?e+r:e),0n),[b,w]=n.useState(0),[k,S]=n.useState(!1),v=r[b];return n.useEffect((()=>{w(0)}),[r]),/*#__PURE__*/e.jsxs(o.Rows,{children:[/*#__PURE__*/e.jsxs(o.Row,{children:[/*#__PURE__*/e.jsx(t.LabelSm,{children:"Total"}),/*#__PURE__*/e.jsx(c.Value,{children:/*#__PURE__*/e.jsx(a.SolanaPriceDisplay,{quantities:[g,i],tokenPrice:u})})]}),l&&l.action&&/*#__PURE__*/e.jsxs(o.Row,{children:[/*#__PURE__*/e.jsx(t.LabelSm,{children:"Action"}),/*#__PURE__*/e.jsx(c.Value,{children:l.action})]}),/*#__PURE__*/e.jsxs(o.Row,{children:[/*#__PURE__*/e.jsx(t.LabelSm,{children:"Fees"}),/*#__PURE__*/e.jsx(c.Value,{children:/*#__PURE__*/e.jsx(a.SolanaPriceDisplay,{quantities:[i||0n],tokenPrice:u})})]}),r.length>1?/*#__PURE__*/e.jsxs(e.Fragment,{children:[/*#__PURE__*/e.jsx(o.Row,{children:/*#__PURE__*/e.jsxs(f,{onClick:()=>S((e=>!e)),children:[/*#__PURE__*/e.jsx("span",{children:"Details"}),/*#__PURE__*/e.jsx(d.default,{height:"16px",width:"16px",strokeWidth:"2",style:{transition:"all 300ms",transform:k?"rotate(180deg)":void 0}})]})}),k&&/*#__PURE__*/e.jsx(o.Row,{children:/*#__PURE__*/e.jsxs(h,{children:[/*#__PURE__*/e.jsxs(p,{children:[/*#__PURE__*/e.jsxs(q,{children:[b+1," of ",r.length," instructions"]}),/*#__PURE__*/e.jsxs(m,{children:[b>0&&/*#__PURE__*/e.jsx(s.BackButton,{backFn:()=>w((e=>e-1))}),b<r.length-1&&/*#__PURE__*/e.jsx(s.NextButton,{nextFn:()=>w((e=>e+1))})]})]}),/*#__PURE__*/e.jsx(x,{children:/*#__PURE__*/e.jsx(j,{instruction:v,rpcEndpoint:y,solPrice:u})})]})})]}):/*#__PURE__*/e.jsx(j,{instruction:v,rpcEndpoint:y,solPrice:u,hideAmount:!0})]})};
